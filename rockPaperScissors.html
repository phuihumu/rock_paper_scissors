<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8"/>
        <link rel="Javascript" href="rpsJS.js">
    </head>
    <body>
        <script>
            const choices = ["Rock", "Paper", "Scissors"];
            function computerPlay()
            {
                let computerChoice;
                let randomGen = Math.floor(Math.random() * 3);
                computerChoice = choices[randomGen];
                return (computerChoice);
            }

            function playRound(playerSelection, computerSelection)
            {
                let lose = true;
                let result;
                let playerChoice = playerSelection.toLowerCase();
                let playerFirstLetter = playerChoice.substring(0,1);
                playerFirstLetter = playerFirstLetter.toUpperCase();
                let temp = playerChoice.slice(1);
                playerChoice = playerFirstLetter + temp;

                if (playerChoice === computerSelection)
                {
                    result = "Tie! " + playerChoice + " ties with " + computerSelection;
                    console.log(result);
                    return 2 //2 indicates tie
                }
                else if (playerChoice === "Rock")
                {
                    if (computerSelection === "Scissors")
                    {
                        lose = false;
                    }
                }
                else if (playerChoice === "Paper")
                {
                    if (computerSelection === "Rock")
                    {
                        lose = false;
                    }
                }
                else {  //playerChoice is Scissors
                    if (computerSelection === "Paper")
                    {
                        lose = false;
                    }
                }

                if (lose)
                {
                    console.log("You Lose! " + computerSelection + " beats " + playerChoice);
                    return 1; // 1 means computer win
                }
                console.log("You Win! " + playerChoice + " beats " + computerSelection);
                return 0; // 0 means player win
            }

            function game()
            {
                let playerScore = 0;
                let computerScore = 0;

                for (let i =0; i <  5; i++)
                {
                    let playerInput = prompt("Please enter: Rock, Paper, or Scissors");
                    let computerInput = computerPlay();

                    let outcome = playRound(playerInput,computerInput);
                    if (outcome === 0)
                    {
                        playerScore++;
                    }
                    else if (outcome === 1)
                    {
                        computerScore++;
                    }
                }

                if (playerScore > computerScore)
                {
                    return ("Player Wins!");
                }
                else if (playerScore < computerScore)
                {
                    return ("Computer Wins!");
                }
                else {
                    return ("Tie!");
                }

            }
        </script>
    </body>
</html>